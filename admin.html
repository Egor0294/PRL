<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель управления - Первый ритм Ленинского</title>
    <link rel="stylesheet" href="editor-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="editor-scripts.js" defer></script>
</head>
<body>
    <!-- Шапка админки -->
    <header class="editor-header">
        <div class="container">
            <div class="editor-logo">
                <h1><i class="fas fa-cog"></i> Панель управления сайтом</h1>
                <p>Студия танцев "Первый ритм Ленинского"</p>
            </div>
            
            <div class="editor-actions">
                <button class="btn btn-success" onclick="saveAllChanges()">
                    <i class="fas fa-save"></i> Сохранить все
                </button>
                <button class="btn btn-secondary" onclick="previewSite()">
                    <i class="fas fa-eye"></i> Просмотр сайта
                </button>
                <a href="index.html" class="btn btn-primary">
                    <i class="fas fa-home"></i> На сайт
                </a>
            </div>
        </div>
    </header>

    <!-- Основной интерфейс редактора -->
    <div class="editor-container">
        <!-- Левая панель - навигация -->
        <aside class="editor-sidebar">
            <div class="sidebar-section">
                <h3><i class="fas fa-sitemap"></i> Страницы сайта</h3>
                <div class="pages-list" id="pages-list">
                    <!-- Страницы будут загружены через JS -->
                </div>
                
                <button class="btn btn-block" onclick="createNewPage()">
                    <i class="fas fa-plus"></i> Создать страницу
                </button>
            </div>
            
            <div class="sidebar-section">
                <h3><i class="fas fa-images"></i> Медиа-библиотека</h3>
                <div class="media-actions">
                    <button class="btn btn-sm btn-block" onclick="openMediaUpload()">
                        <i class="fas fa-upload"></i> Загрузить изображение
                    </button>
                    <button class="btn btn-sm btn-block" onclick="openYandexDisk()">
                        <i class="fab fa-yandex"></i> Яндекс.Диск
                    </button>
                </div>
                <div class="media-gallery" id="media-gallery">
                    <!-- Медиафайлы будут загружены -->
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3><i class="fas fa-chart-line"></i> Статистика</h3>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-number" id="pages-count">0</span>
                        <span class="stat-label">Страниц</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="images-count">0</span>
                        <span class="stat-label">Изображений</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="products-count">0</span>
                        <span class="stat-label">Товаров/услуг</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Центральная панель - редактор -->
        <main class="editor-main">
            <!-- Вкладки редактора -->
            <div class="editor-tabs">
                <button class="editor-tab active" data-tab="content">
                    <i class="fas fa-edit"></i> Контент
                </button>
                <button class="editor-tab" data-tab="design">
                    <i class="fas fa-paint-brush"></i> Дизайн
                </button>
                <button class="editor-tab" data-tab="settings">
                    <i class="fas fa-cogs"></i> Настройки
                </button>
                <button class="editor-tab" data-tab="seo">
                    <i class="fas fa-search"></i> SEO
                </button>
            </div>

            <!-- Контент редактора -->
            <div class="editor-content">
                <!-- Вкладка контента -->
                <div class="tab-pane active" id="content-tab">
                    <div class="toolbar">
                        <div class="toolbar-group">
                            <button class="toolbar-btn" onclick="formatText('bold')" title="Жирный">
                                <i class="fas fa-bold"></i>
                            </button>
                            <button class="toolbar-btn" onclick="formatText('italic')" title="Курсив">
                                <i class="fas fa-italic"></i>
                            </button>
                            <button class="toolbar-btn" onclick="formatText('underline')" title="Подчеркнутый">
                                <i class="fas fa-underline"></i>
                            </button>
                        </div>
                        
                        <div class="toolbar-group">
                            <button class="toolbar-btn" onclick="insertLink()" title="Вставить ссылку">
                                <i class="fas fa-link"></i>
                            </button>
                            <button class="toolbar-btn" onclick="insertImage()" title="Вставить изображение">
                                <i class="fas fa-image"></i>
                            </button>
                            <button class="toolbar-btn" onclick="insertList('ul')" title="Маркированный список">
                                <i class="fas fa-list-ul"></i>
                            </button>
                            <button class="toolbar-btn" onclick="insertList('ol')" title="Нумерованный список">
                                <i class="fas fa-list-ol"></i>
                            </button>
                        </div>
                        
                        <div class="toolbar-group">
                            <select class="font-size-select" onchange="changeFontSize(this.value)">
                                <option value="">Размер текста</option>
                                <option value="12px">Маленький</option>
                                <option value="16px" selected>Обычный</option>
                                <option value="20px">Большой</option>
                                <option value="24px">Заголовок</option>
                                <option value="32px">Большой заголовок</option>
                            </select>
                            
                            <select class="font-family-select" onchange="changeFontFamily(this.value)">
                                <option value="">Шрифт</option>
                                <option value="Arial, sans-serif" selected>Arial</option>
                                <option value="'Georgia', serif">Georgia</option>
                                <option value="'Times New Roman', serif">Times New Roman</option>
                                <option value="'Courier New', monospace">Courier New</option>
                            </select>
                        </div>
                    </div>

                    <!-- Область редактирования -->
                    <div class="editor-area" id="editor-area" contenteditable="true">
                        <!-- Сюда будет загружен контент для редактирования -->
                        <h2>Заголовок страницы</h2>
                        <p>Начните редактировать текст здесь...</p>
                    </div>

                    <!-- Предпросмотр на мобильных устройствах -->
                    <div class="preview-section">
                        <h4><i class="fas fa-mobile-alt"></i> Предпросмотр</h4>
                        <div class="device-preview">
                            <div class="device-screen">
                                <div id="mobile-preview">
                                    <!-- Предпросмотр будет здесь -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Вкладка дизайна -->
                <div class="tab-pane" id="design-tab">
                    <h3>Настройки дизайна</h3>
                    
                    <div class="design-options">
                        <div class="color-picker">
                            <h4>Цветовая схема</h4>
                            <div class="color-grid">
                                <div class="color-option">
                                    <label>Основной цвет</label>
                                    <input type="color" id="primary-color" value="#667eea">
                                </div>
                                <div class="color-option">
                                    <label>Вторичный цвет</label>
                                    <input type="color" id="secondary-color" value="#764ba2">
                                </div>
                                <div class="color-option">
                                    <label>Акцентный цвет</label>
                                    <input type="color" id="accent-color" value="#FF6B6B">
                                </div>
                                <div class="color-option">
                                    <label>Цвет текста</label>
                                    <input type="color" id="text-color" value="#333333">
                                </div>
                            </div>
                        </div>
                        
                        <div class="font-settings">
                            <h4>Настройки шрифтов</h4>
                            <div class="form-group">
                                <label>Основной шрифт</label>
                                <select id="main-font">
                                    <option value="Arial, sans-serif" selected>Arial</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                    <option value="'Montserrat', sans-serif">Montserrat</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Размер основного текста</label>
                                <input type="range" id="font-size" min="12" max="24" value="16">
                                <span id="font-size-value">16px</span>
                            </div>
                        </div>
                        
                        <div class="layout-settings">
                            <h4>Макет сайта</h4>
                            <div class="layout-options">
                                <label class="layout-option">
                                    <input type="radio" name="layout" value="boxed" checked>
                                    <span>С отступами</span>
                                </label>
                                <label class="layout-option">
                                    <input type="radio" name="layout" value="fullwidth">
                                    <span>Во всю ширину</span>
                                </label>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="applyDesignSettings()">
                            <i class="fas fa-check"></i> Применить дизайн
                        </button>
                    </div>
                </div>

                <!-- Вкладка настроек -->
                <div class="tab-pane" id="settings-tab">
                    <h3>Настройки сайта</h3>
                    
                    <div class="settings-grid">
                        <div class="settings-section">
                            <h4>Основная информация</h4>
                            <div class="form-group">
                                <label>Название сайта</label>
                                <input type="text" id="site-name" value="Первый ритм Ленинского">
                            </div>
                            <div class="form-group">
                                <label>Слоган/описание</label>
                                <input type="text" id="site-tagline" value="Студия танцев в Иркутске">
                            </div>
                            <div class="form-group">
                                <label>Логотип (URL)</label>
                                <input type="text" id="site-logo" placeholder="https://example.com/logo.png">
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h4>Контакты</h4>
                            <div class="form-group">
                                <label>Телефон</label>
                                <input type="tel" id="contact-phone" value="+7 (904) 123-31-75">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="contact-email" value="egor.denunn@yandex.ru">
                            </div>
                            <div class="form-group">
                                <label>Адрес</label>
                                <input type="text" id="contact-address" value="г. Иркутск, ул. 1-й Ленинский квартал д. 1">
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h4>Социальные сети</h4>
                            <div class="form-group">
                                <label>ВКонтакте</label>
                                <input type="url" id="social-vk" placeholder="https://vk.com/...">
                            </div>
                            <div class="form-group">
                                <label>Telegram</label>
                                <input type="url" id="social-telegram" placeholder="https://t.me/...">
                            </div>
                            <div class="form-group">
                                <label>Instagram</label>
                                <input type="url" id="social-instagram" placeholder="https://instagram.com/...">
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-success" onclick="saveSiteSettings()">
                        <i class="fas fa-save"></i> Сохранить настройки
                    </button>
                </div>

                <!-- Вкладка SEO -->
                <div class="tab-pane" id="seo-tab">
                    <h3>SEO оптимизация</h3>
                    
                    <div class="seo-settings">
                        <div class="form-group">
                            <label>Мета-заголовок (Title)</label>
                            <input type="text" id="seo-title" placeholder="Студия танцев в Иркутске">
                            <small>До 60 символов</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Мета-описание (Description)</label>
                            <textarea id="seo-description" rows="3" placeholder="Описание для поисковых систем"></textarea>
                            <small>До 160 символов</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Ключевые слова</label>
                            <input type="text" id="seo-keywords" placeholder="танцы, иркутск, студия, обучение">
                            <small>Через запятую</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Канонический URL</label>
                            <input type="url" id="seo-canonical" placeholder="https://ваш-сайт.ru/">
                        </div>
                        
                        <div class="seo-preview">
                            <h4>Предпросмотр в поиске:</h4>
                            <div class="search-preview">
                                <div class="search-title" id="preview-title">Заголовок страницы</div>
                                <div class="search-url" id="preview-url">https://ваш-сайт.ru/</div>
                                <div class="search-description" id="preview-description">Описание страницы для поисковых систем...</div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveSeoSettings()">
                            <i class="fas fa-search"></i> Сохранить SEO настройки
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Правая панель - блоки и компоненты -->
        <aside class="editor-components">
            <h3><i class="fas fa-cube"></i> Готовые блоки</h3>
            
            <div class="components-list">
                <div class="component" draggable="true" onclick="insertComponent('hero')">
                    <div class="component-icon"><i class="fas fa-star"></i></div>
                    <div class="component-info">
                        <strong>Главный баннер</strong>
                        <small>Большой заголовок с кнопками</small>
                    </div>
                </div>
                
                <div class="component" draggable="true" onclick="insertComponent('services')">
                    <div class="component-icon"><i class="fas fa-list-alt"></i></div>
                    <div class="component-info">
                        <strong>Услуги/Цены</strong>
                        <small>Таблица с ценами</small>
                    </div>
                </div>
                
                <div class="component" draggable="true" onclick="insertComponent('gallery')">
                    <div class="component-icon"><i class="fas fa-images"></i></div>
                    <div class="component-info">
                        <strong>Галерея</strong>
                        <small>Сетка изображений</small>
                    </div>
                </div>
                
                <div class="component" draggable="true" onclick="insertComponent('team')">
                    <div class="component-icon"><i class="fas fa-users"></i></div>
                    <div class="component-info">
                        <strong>Команда</strong>
                        <small>Карточки сотрудников</small>
                    </div>
                </div>
                
                <div class="component" draggable="true" onclick="insertComponent('contact-form')">
                    <div class="component-icon"><i class="fas fa-envelope"></i></div>
                    <div class="component-info">
                        <strong>Форма обратной связи</strong>
                        <small>Форма для заявок</small>
                    </div>
                </div>
                
                <div class="component" draggable="true" onclick="insertComponent('map')">
                    <div class="component-icon"><i class="fas fa-map-marker-alt"></i></div>
                    <div class="component-info">
                        <strong>Карта</strong>
                        <small>Карта проезда</small>
                    </div>
                </div>
            </div>
            
            <div class="quick-actions">
                <h4>Быстрые действия</h4>
                <button class="btn btn-sm btn-block" onclick="exportSite()">
                    <i class="fas fa-download"></i> Экспорт сайта
                </button>
                <button class="btn btn-sm btn-block" onclick="importSite()">
                    <i class="fas fa-upload"></i> Импорт сайта
                </button>
                <button class="btn btn-sm btn-block btn-warning" onclick="clearCache()">
                    <i class="fas fa-broom"></i> Очистить кэш
                </button>
            </div>
        </aside>
    </div>

    <!-- Модальные окна -->
    <div class="modal" id="media-modal">
        <div class="modal-content large">
            <span class="close-modal" onclick="closeMediaModal()">&times;</span>
            <h3>Медиа-библиотека</h3>
            <div class="media-upload">
                <div class="upload-area" id="drop-area">
                    <i class="fas fa-cloud-upload-alt fa-3x"></i>
                    <p>Перетащите файлы сюда или</p>
                    <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">
                        Выберите файлы
                    </button>
                    <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
                </div>
                
                <div class="yandex-integration">
                    <h4><i class="fab fa-yandex"></i> Яндекс.Диск</h4>
                    <div class="form-group">
                        <label>OAuth токен</label>
                        <input type="password" id="yandex-token" placeholder="Введите токен">
                        <small><a href="https://yandex.ru/dev/disk/" target="_blank">Как получить токен?</a></small>
                    </div>
                    <button class="btn btn-secondary" onclick="connectYandexDisk()">
                        Подключить Яндекс.Диск
                    </button>
                </div>
                
                <div class="media-grid" id="media-grid">
                    <!-- Загруженные медиафайлы -->
                </div>
            </div>
        </div>
    </div>

    <!-- Уведомления -->
    <div class="notifications" id="notifications"></div>

    <script>
        // Инициализация редактора
        document.addEventListener('DOMContentLoaded', function() {
            initializeEditor();
            loadSiteData();
            updateStats();
            
            // Настройка перетаскивания
            setupDragAndDrop();
            
            // Автосохранение каждые 30 секунд
            setInterval(autoSave, 30000);
        });
        
        function initializeEditor() {
            // Настройка вкладок
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    openTab(tabName);
                });
            });
            
            // Настройка редактора
            setupEditorArea();
        }
        
        function openTab(tabName) {
            // Скрыть все вкладки
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Убрать активность со всех табов
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Показать выбранную вкладку
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Активировать таб
            document.querySelector(`.editor-tab[data-tab="${tabName}"]`).classList.add('active');
        }
    </script>
</body>
</html>
